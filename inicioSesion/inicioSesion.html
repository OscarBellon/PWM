<!DOCTYPE html>
<html lang="es">
  <head>
    <link rel="stylesheet" type="text/css" href="/inicioSesion/inicioSesion.css">
    <title>ElectroDisuar</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <header id="header">
      <nav>
        <!-- Componente header -->
      </nav>
    </header>
    <header>
      <div class="titulo">
        <p>Acceder</p>
      </div>
    </header>  
    <main>
      <section class="formulario">
        <heading class="subtitulo">
          <p class="contactanos">Registro de Usuario</p>
        </heading>
        <form class="campos">
          <fieldset>

            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="telefono">

            <label for="passs">Contraseña:</label>
            <input type="password" id="pass" name="correo">

          </fieldset>
          <button type="button" class="boton" id="entrar">Acceder</button>
          <button type="button" class="boton" href="/registroUsuario/registroUsuario.html">Registrarse</button>
          <p id="salida"></p>
        </form>
      </section>
    </main>
    <footer id="footer">
      <!-- Componente del footer -->
    </footer>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', init);

    function loadTemplate(fileName, id, callback) {

      fetch(fileName).then((res) => {
          return res.text();
      }).then((text) => {
          document.getElementById(id).innerHTML = text;
          //console.log(text)

          if(callback){
              callback();
          }
      })
    }

    function init() {
      loadTemplate("/Componentes/Header/header.html","header");
      loadTemplate("/Componentes/footer/footer.html","footer");
    }

    const nombre = document.getElementById("nombre")
    const contraseña = document.getElementById("pass")
    const salida = document.getElementById("salida")

    entrar.addEventListener("click", e=>{
      console.log("envio")
      let warnings = ""
      let entra = false

      var archivo = new File([""], "usuarios.txt");
      var lector = new FileReader();

      lector.onload = function(evento) {

        var contenido = evento.target.result;
        var cadenaBuscada = nombre.value + ":" + contraseña.value
        console.log(cadenaBuscada)
        if (contenido.includes(cadenaBuscada)) {
          entra = true
          console.log("si")
        }
      };
      lector.readAsText(archivo);

      if(entra){
        salida.innerHTML = "Acceso correcto"
      }else{
        salida.innerHTML = "Credenciales incorrectas"
      }
    })

  </script>
</html>