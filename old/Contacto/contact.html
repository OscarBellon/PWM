<!DOCTYPE html>
<html lang="es">
  <head>
    <link rel="stylesheet" type="text/css" href="./contact.css">
    <title>ElectroDisuar</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <header id="header">
      <nav>
        <!-- Componente header -->
      </nav>
    </header>
    <header>
      <div class="titulo">
        <p>Contáctanos</p>
      </div>
    </header>  
    <main>
      <section class="formulario">
        <heading class="subtitulo">
          <p class="contactanos">Dinos en que podemos ayudarte:</p>
        </heading>
        <form class="campos">
          <fieldset>

            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre">

            <label for="telefono">Teléfono:</label>
            <input type="text" id="telefono" name="telefono">

            <label for="correo">Correo Electrónico:</label>
            <input type="text" id="correo" name="correo">

            <label for="mensaje">Mensaje:</label>
            <input type="text" id="mensaje" name="mensaje" class="mensajebox">

          </fieldset>
          <button type="button" class="boton" id="send">Enviar</button>
          <p id="salida"></p>
        </form>
      </section>
    </main>
    <footer id="footer">
      <!-- Componente del footer -->
    </footer>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', init);

    function loadTemplate(fileName, id, callback) {

      fetch(fileName).then((res) => {
          return res.text();
      }).then((text) => {
          document.getElementById(id).innerHTML = text;
          //console.log(text)

          if(callback){
              callback();
          }
      })
    }

    function init() {
      loadTemplate("/Componentes/Header/header.html","header");
      loadTemplate("/Componentes/footer/footer.html","footer");
    }

    const nombre = document.getElementById("nombre")
    const correo = document.getElementById("correo")
    const mensaje = document.getElementById("mensaje")
    const salida = document.getElementById("salida")

    send.addEventListener("click", e=>{
      console.log("envio")
      e.preventDefault()

      let aviso = false
      let warnings = ""
      let mailchk = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,5})+$/

      if(nombre.value.length < 4){
        warnings += `El nombre es demasiado corto <br>`
        aviso = true
      }       

      if(!mailchk.test(correo.value)){
        warnings += `El email no es válido <br>`
        aviso = true
      }

      if(mensaje.value == ""){
        warnings += `El mensaje está vacío <br>`
        aviso = true
      }

      if(aviso){
        salida.innerHTML = warnings
      }else{
        salida.innerHTML = "Mensaje enviado"
      }
    })

  </script>
</html>