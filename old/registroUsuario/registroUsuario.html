<!DOCTYPE html>
<html lang="es">
  <head>
    <link rel="stylesheet" type="text/css" href="./registroUsuario.css">
    <title>ElectroDisuar</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <header id="header">
      <nav>
        <!-- Componente header -->
      </nav>
    </header>
    <header>
      <div class="titulo">
        <p>Acceder</p>
      </div>
    </header>  
    <main>
      <section class="formulario">
        <heading class="subtitulo">
          <p class="contactanos">Registro de Usuario</p>
        </heading>
        <form class="campos" id="form">
          <fieldset>

            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre">

            <label for="telefono">Correo Electrónico:</label>
            <input type="text" id="correo" name="correo">

            <label for="correo">Contraseña:</label>
            <input type="password" id="pass" name="pass">

            <label for="mensaje">Confirmar contraseña:</label>
            <input type="password" id="cpass" name="cpass" class="mensajebox">

          </fieldset>
          <button type="submit" class="boton" id="send">Registrarse</button>
          <p id="feedback"></p>
        </form>
      </section>
    </main>
    <footer id="footer">
      <!-- Componente del footer -->
    </footer>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', init);

    function loadTemplate(fileName, id, callback) {

      fetch(fileName).then((res) => {
          return res.text();
      }).then((text) => {
          document.getElementById(id).innerHTML = text;
          //console.log(text)

          if(callback){
              callback();
          }
      })
    }

    function init() {
      loadTemplate("/Componentes/Header/header.html","header");
      loadTemplate("/Componentes/footer/footer.html","footer");
    }

    const nombre = document.getElementById("nombre")
    const correo = document.getElementById("correo")
    const contraseña = document.getElementById("pass")
    const confirmar = document.getElementById("cpass")
    const salida = document.getElementById("feedback")

    send.addEventListener("click", e=>{
    console.log("envio")
    e.preventDefault()

    let aviso = false
    let warnings = ""
    let mailchk = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,5})+$/

    if(nombre.value.length < 4){
      warnings += `El nombre es demasiado corto <br>`
      aviso = true
    }       

    if(!mailchk.test(correo.value)){
      warnings += `El email no es válido <br>`
      aviso = true
    }

    if(contraseña.value.length < 6){
      warnings += `La contraseña debe ser de 6 o más caracteres <br>`
      aviso = true
    }

    if(contraseña.value != confirmar.value){
      warnings += `Las contraseñas deben coincidir <br>`
      aviso = true
    }

    if(aviso){
      salida.innerHTML = warnings
    }else{
      salida.innerHTML = "Registrado con éxito"
    }
  })
  </script>
</html>